---
keywords: fastai
description: 2022-10-09
title: Application Programming Interface (API)
toc: true
badges: true
comments: true
tags: [jupyter]
nb_path: _notebooks/2022-10-03-apis.ipynb
layout: notebook
---

<!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2022-10-03-apis.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Python,-RapidAPI-Terms">Python, RapidAPI Terms<a class="anchor-link" href="#Python,-RapidAPI-Terms"> </a></h2><blockquote><p>APIs and tooling like Jupyter docs allows many opportunities in fields like Data Science.  As more and more developers use APIs, they build standards in how you setup a client, send requests and receive information...</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Covid19-RapidAPI-Example">Covid19 RapidAPI Example<a class="anchor-link" href="#Covid19-RapidAPI-Example"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">## how to get data from each site</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Requests is a HTTP library for the Python programming language. </span>
<span class="sd">The goal of the project is to make HTTP requests simpler and more human-friendly. </span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://corona-virus-world-and-india-data.p.rapidapi.com/api&quot;</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s2">&quot;X-RapidAPI-Key&quot;</span><span class="p">:</span> <span class="s2">&quot;947170cc21msh533b44751737465p1dc810jsn1c522f8542f5&quot;</span><span class="p">,</span>
	<span class="s2">&quot;X-RapidAPI-Host&quot;</span><span class="p">:</span> <span class="s2">&quot;corona-virus-world-and-india-data.p.rapidapi.com&quot;</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c1">## change to .json()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="c1"># This code looks for &quot;world data&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;World Totals&quot;</span><span class="p">)</span>
<span class="n">world</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;world_total&#39;</span><span class="p">)</span>  <span class="c1"># turn response to json() so we can extract &quot;world_total&quot;</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">world</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># this finds key, value pairs in country</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

<span class="nb">print</span><span class="p">()</span>

<span class="c1"># This code looks for USA in &quot;countries_stats&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Country Totals&quot;</span><span class="p">)</span>
<span class="c1">## countries is a list</span>
<span class="n">countries</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;countries_stat&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">country</span> <span class="ow">in</span> <span class="n">countries</span><span class="p">:</span>  <span class="c1"># countries is a list</span>
    <span class="k">if</span> <span class="n">country</span><span class="p">[</span><span class="s2">&quot;country_name&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;USA&quot;</span><span class="p">:</span>  <span class="c1"># this filters for USA</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">country</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># this finds key, value pairs in country</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="c1">## have different data paterns which need to be found out before being able to use the data</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Digital-Coin-Example">Digital Coin Example<a class="anchor-link" href="#Digital-Coin-Example"> </a></h2><blockquote><p>This example provides digital coin feedback (ie Bitcoin).  It include popularity, price, symbols, etc.</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">## how to get data from each site</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Requests is a HTTP library for the Python programming language. </span>
<span class="sd">The goal of the project is to make HTTP requests simpler and more human-friendly. </span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://google-translate1.p.rapidapi.com/language/translate/v2/detect&quot;</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s2">&quot;q=English</span><span class="si">%20i</span><span class="s2">s</span><span class="si">%20ha</span><span class="s2">rd%2C%20but</span><span class="si">%20d</span><span class="s2">etectably</span><span class="si">%20s</span><span class="s2">o&quot;</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s2">&quot;content-type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/x-www-form-urlencoded&quot;</span><span class="p">,</span>
	<span class="s2">&quot;Accept-Encoding&quot;</span><span class="p">:</span> <span class="s2">&quot;application/gzip&quot;</span><span class="p">,</span>
	<span class="s2">&quot;X-RapidAPI-Key&quot;</span><span class="p">:</span> <span class="s2">&quot;947170cc21msh533b44751737465p1dc810jsn1c522f8542f5&quot;</span><span class="p">,</span>
	<span class="s2">&quot;X-RapidAPI-Host&quot;</span><span class="p">:</span> <span class="s2">&quot;google-translate1.p.rapidapi.com&quot;</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="c1">## change to .json()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>


<span class="c1"># print(&quot;Languages&quot;)</span>
<span class="c1"># lang = response.json().get(&#39;languages&#39;)  # turn response to json() so we can extract &quot;world_total&quot;</span>
<span class="c1"># for key, value in lang.items():  # this finds key, value pairs in country</span>
<span class="c1">#     print(key, value)</span>

<span class="c1"># print()</span>

<span class="c1"># # # This code looks for USA in &quot;countries_stats&quot;</span>
<span class="c1"># # print(&quot;Country Totals&quot;)</span>
<span class="c1"># # ## countries is a list</span>
<span class="c1"># # countries = response.json().get(&#39;countries_stat&#39;)</span>
<span class="c1"># # for country in countries:  # countries is a list</span>
<span class="c1"># #     if country[&quot;country_name&quot;] == &quot;USA&quot;:  # this filters for USA</span>
<span class="c1"># #         for key, value in country.items():  # this finds key, value pairs in country</span>
<span class="c1"># #             print(key, value)</span>
<span class="c1"># # ## have different data paterns which need ot be found out before being able to use the data</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Formatting-Digital-Coin-example">Formatting Digital Coin example<a class="anchor-link" href="#Formatting-Digital-Coin-example"> </a></h2><blockquote><p>JSON text transferred from the API in the previous cell was converted to a Python Dictionary called json.  The "coins" in the dictionary contain a list of the most relevant data.   Look at the code and comments to see how the original text is turned into something understandable.   Additionally, there are error check to make sure we are starting the code with the expectation that the API was run correctly.</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This cell is dependent on valid run of API above.</span>
<span class="sd">- try and except code is making sure &quot;json&quot; was properly run above</span>
<span class="sd">- inside second try is code that is used to process Coin API data</span>

<span class="sd">Note.  Run this cell repeatedly to format data without re-activating API</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;JSON data is Python type: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">json</span><span class="p">)))</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Extracting Coins JSON status, if the API worked</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;API status: &quot;</span> <span class="o">+</span> <span class="n">status</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">()</span>
        
        <span class="c1"># Extracting Coins JSON data, data about the coins</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
        
        <span class="c1"># Procedural abstraction of Print code for coins</span>
        <span class="k">def</span> <span class="nf">print_coin</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s2">&quot;symbol&quot;</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Icon Url: &quot;</span> <span class="o">+</span> <span class="n">c</span><span class="p">[</span><span class="s2">&quot;iconUrl&quot;</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Rank Url: &quot;</span> <span class="o">+</span> <span class="n">c</span><span class="p">[</span><span class="s2">&quot;coinrankingUrl&quot;</span><span class="p">])</span>

        <span class="c1"># Coins data was observed to be a list</span>
        <span class="k">for</span> <span class="n">coin</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;coins&#39;</span><span class="p">]:</span>
            <span class="n">print_coin</span><span class="p">(</span><span class="n">coin</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">()</span>
            
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Did you insert a valid key in X-RapidAPI-Key of API cell above?&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This cell is dependent on running API call in cell above!&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Adding-an-API-Related-to-the-Group-Project">Adding an API Related to the Group Project<a class="anchor-link" href="#Adding-an-API-Related-to-the-Group-Project"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://dictionary-by-api-ninjas.p.rapidapi.com/v1/dictionary&quot;</span>

<span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Which word do you want to search&quot;</span><span class="p">)</span>
<span class="n">querystring</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;word&quot;</span><span class="p">:</span> <span class="nb">input</span><span class="p">()}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s2">&quot;X-RapidAPI-Key&quot;</span><span class="p">:</span> <span class="s2">&quot;947170cc21msh533b44751737465p1dc810jsn1c522f8542f5&quot;</span><span class="p">,</span>
	<span class="s2">&quot;X-RapidAPI-Host&quot;</span><span class="p">:</span> <span class="s2">&quot;dictionary-by-api-ninjas.p.rapidapi.com&quot;</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">querystring</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">)</span> <span class="c1">## changed .text to .json</span>

<span class="n">word</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;word&#39;</span><span class="p">)</span> <span class="c1">## gets the word</span>
<span class="n">define</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;definition&#39;</span><span class="p">)</span> <span class="c1">## gets the definition</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Word: &quot;</span> <span class="o">+</span> <span class="n">word</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Definition: &quot;</span> <span class="o">+</span> <span class="n">define</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;bound method Response.json of &lt;Response [200]&gt;&gt;
Word: pie
Definition: 1. An article of food consisting of paste baked with something in it or under it; as, chicken pie; venison pie; mince pie; apple pie; pumpkin pie. 2. See Camp, n., 5. [Prov. Eng.] Halliwell. Pie crust, the paste of a pie.

1. (Zoöl.) (a) A magpie. (b) Any other species of the genus Pica, and of several allied genera. [Written also pye.] 2. (R. C. Ch.)  The service book. 3. (Pritn.)  Type confusedly mixed. See Pi. By cock and pie, an adjuration equivalent to &#34;by God and the service book.&#34; Shak. -- Tree pie (Zoöl.), any Asiatic bird of the genus Dendrocitta, allied to the magpie. -- Wood pie. (Zoöl.) See French pie, under French.

See Pi.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

